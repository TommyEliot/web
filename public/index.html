<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <title>Электронная библиотека документов</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <nav>
      <div class="logo">
        <img
          src="https://avatars.mds.yandex.net/i?id=0aab4d4940cc85f7af28580d54035486805635ca-7716570-images-thumbs&n=13&exp=1"
          alt="Электронная библиотека документов">
        <h1>Электронная библиотека докуметов</h1>
      </div>
  </header>
  <main>
    <div
      style="background-image: url(https://cdn.wallpapersafari.com/61/43/r3TMxh.jpg); background-size: cover; height: 500px;">
    </div>
    <div class="tabs">
      <a href="#new-docs"><span class="active">Новые</span></a>
      <a href="#old-docs"><span>Старые</span></a>
      <a href="#tags"><span>Теги</span></a>
      <a href="#add-doc"><span>Добавить</span></a>
    </div>
    <div class="content">
      <div id="new-docs" class="tabcontent">
        <ul>
          <!-- Здесь отображаются новые документы -->

        </ul>
      </div>
      <div id="old-docs" class="tabcontent">
        <ul>
          <!-- Здесь отображаются старые документы -->
        </ul>
      </div>
      <div id="tags" class="tabcontent">
        <ul>
          <!-- Здесь отображаются теги -->
        </ul>
      </div>
      <div id="add-doc" class="tabcontent">
        <form>
          <input type="text" id='doc-input' placeholder="Введите текст документа...">
          <input type="text" id='tag-input' placeholder="Введите теги через пробел...">
          <button type="button" id='add-button'>Добавить документ</button>
        </form>
      </div>
    </div>
  </main>
  <footer>
    <div class="contact-info">
      <p>Казань, Большая Красная 55</p>
      <p>Телефон: 85555553535</p>
      <p>Email: KAI@kai.ru</p>
    </div>

    <div>
      <div class="copyright">
        <p>&copy; 2023 Электронная библиотека документов.</p>
        <ul>
          <li><a href="FAQ.html">FAQ</a></li>
          <li><a href="#">О нас</a></li>
          <li><a href="#">Сервисы</a></li>
          <li><a href="#">Свяжитесь с нами</a></li>
        </ul>
      </div>
    </div>
  </footer>
  <script>
    var documents = [];
    const docInput = document.querySelector('#doc-input');
    const tagsInput = document.querySelector('#tag-input');
    const addButton = document.querySelector('#add-button');
  
    function addDocument(description, parentTabId) {
      const parentTab = document.getElementById(parentTabId);
      const docElement = document.createElement('p');
      docElement.textContent = description;
      parentTab.appendChild(docElement);
    }
  
    function addTag(tag, parentTabId) {
      const parentTab = document.getElementById(parentTabId);
      const tagElement = document.createElement('h2');
      tagElement.textContent = tag;
      parentTab.appendChild(tagElement);
    }
  
    function loadDocuments() {
      return new Promise((resolve, reject) => {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/tags');
        xhr.onload = function () {
          if (xhr.status === 200) {
            documents = JSON.parse(xhr.responseText);
            resolve();
          } else {
            reject('Failed to load documents');
          }
        };
        xhr.send();
      });
    }
  
    function handleAddClick() {
      const description = document.getElementById('doc-input').value;
      const tags = document.getElementById('tag-input').value.split(' ');
      const newDocument = {
        description: description,
        tags: tags
      };
      documents.unshift(newDocument);
      document.getElementById('doc-input').value = '';
      document.getElementById('tag-input').value = '';
      displayDocuments();
      displayTags();
    }
  
    function clearTabs() {
      const tabIds = ['new-docs', 'old-docs', 'tags'];
      tabIds.forEach(tabId => {
        const tab = document.getElementById(tabId);
        while (tab.firstChild) {
          tab.firstChild.remove();
        }
      });
    }
  
    function displayDocuments() {
      clearTabs();
      documents.forEach((doc) => {
        addDocument(doc.description, 'new-docs');
      });
      [...documents].reverse().forEach((doc) => {
        addDocument(doc.description, 'old-docs');
      });
    }
  
    function displayTags() {
      const uniqueTags = [...new Set(documents.flatMap(doc => doc.tags))];
      uniqueTags.forEach(tag => {
        addTag(tag, 'tags');
        documents.filter(doc => doc.tags.includes(tag)).forEach(doc => addDocument(doc.description, 'tags'));
      });
    }
  
    window.onload = () => {
      loadDocuments()
        .then(() => {
          displayDocuments();
          displayTags();
        })
        .catch(err => console.error(err));
    }
    addButton.addEventListener('click', handleAddClick);
  </script>
  
  

</body>

</html>