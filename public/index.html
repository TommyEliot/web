<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <title>Электронная библиотека документов</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <nav>
      <div class="logo">
        <img
          src="https://avatars.mds.yandex.net/i?id=0aab4d4940cc85f7af28580d54035486805635ca-7716570-images-thumbs&n=13&exp=1"
          alt="Электронная библиотека документов">
        <h1>Электронная библиотека докуметов</h1>
      </div>
  </header>
  <main>
    <div
      style="background-image: url(https://cdn.wallpapersafari.com/61/43/r3TMxh.jpg); background-size: cover; height: 500px;">
    </div>
    <div class="tabs">
      <a href="#" onclick="openTab(event, 'new-docs')"><span class="active">Новые</span></a>
      <a href="#" onclick="openTab(event, 'old-docs')"><span>Старые</span></a>
      <a href="#" onclick="openTab(event, 'tags')"><span>Теги</span></a>
      <a href="#" onclick="openTab(event, 'add-doc')"><span>Добавить</span></a>
    </div>
    <div class="content">
      <div id="new-docs" class="tabcontent">
        <ul>
          <!-- Здесь отображаются новые документы -->

        </ul>
      </div>
      <div id="old-docs" class="tabcontent">
        <ul>
          <!-- Здесь отображаются старые документы -->
        </ul>
      </div>
      <div id="tags" class="tabcontent">
        <ul>
          <!-- Здесь отображаются теги -->
        </ul>
      </div>
      <div id="add-doc" class="tabcontent">
        <form>
          <input type="text" id="doc-input" placeholder="Введите текст документа...">
          <button type="button" onclick="addDocument()">Добавить документ</button>
        </form>
      </div>
    </div>

  </main>
  <footer>
    <div class="contact-info">
      <p>Казань, Большая Красная 55</p>
      <p>Телефон: 85555553535</p>
      <p>Email: KAI@kai.ru</p>
    </div>

    <div>
      <div class="copyright">
        <p>&copy; 2023 Электронная библиотека документов.</p>
        <ul>
          <li><a href="FAQ.html">FAQ</a></li>
          <li><a href="#">О нас</a></li>
          <li><a href="#">Сервисы</a></li>
          <li><a href="#">Свяжитесь с нами</a></li>
        </ul>
      </div>
    </div>
  </footer>
  <script>
    function loadTags() {
      fetch('/tags')
        .then(response => response.json())
        .then(data => {
          const tagsContainer = document.getElementById('tags');
          tagsContainer.innerHTML = data.map(item => {
            return `
          <div class="tag-item">
            <h3>${item.description}</h3>
            <ul>
              ${item.tags.map(tag => `<li>${tag}</li>`).join('')}
            </ul>
          </div>
        `;
          }).join('');
        })
        .catch(error => {
          console.error('Error:', error);
        });
    }


    // Define the openTab function to switch between tabs
    function openTab(evt, tabName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(tabName).style.display = "block";
      evt.currentTarget.className += " active";
      if (tabName === 'tags') {
        loadTags();
      }
    }

    // Define the addDocument function to add a new document to the library
    var documents = [];

    function addDocument() {
      var docInput = document.getElementById("doc-input");
      if (docInput.value !== "") {
        documents.push(docInput.value);
        displayDocuments("ascending");
        displayDocuments("descending");
        docInput.value = "";
      } else {
        alert("Введите текст документа");
      }
    }

    // Define the displayDocuments function to display all documents in the specified order
    function displayDocuments(order) {
      var docList = document.createElement("ul");
      var docs = documents.slice();
      if (order === "ascending") {
        docs.sort().reverse();
      } else if (order === "descending") {
        docs.sort();
      }
      for (var i = 0; i < docs.length; i++) {
        var docItem = document.createElement("li");
        docItem.appendChild(document.createTextNode(docs[i]));
        docList.appendChild(docItem);
      }
      if (order === "ascending") {
        var newDocs = document.getElementById("new-docs");
        newDocs.innerHTML = "";
        newDocs.appendChild(docList);
      } else if (order === "descending") {
        var oldDocs = document.getElementById("old-docs");
        oldDocs.innerHTML = "";
        oldDocs.appendChild(docList);
      }
    }
    function toggleBlock() {
      var newBlock = document.getElementById("new-docs-block");
      var oldBlock = document.getElementById("old-docs-block");
      if (addBlock.style.display === "none") {
        addBlock.style.display = "block";
        if (newBlock.style.display === "block") {
          newBlock.style.display = "none";
        } else if (oldBlock.style.display === "block") {
          oldBlock.style.display = "none";
        }
      } else {
        addBlock.style.display = "none";
        if (newBlock.style.display === "none") {
          newBlock.style.display = "block";
        } else if (oldBlock.style.display === "none") {
          oldBlock.style.display = "block";
        }
      }
    }
    var addButton = document.getElementById("add-button");
    addButton.addEventListener("click", toggleBlock);
  </script>

</body>

</html>